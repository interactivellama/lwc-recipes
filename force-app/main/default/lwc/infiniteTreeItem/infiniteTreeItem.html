<template>
    <template if:true={isRoot}>
        <template iterator:item={children}>
            <c-infinite-tree-item
                last-item={item.last}
                key={item.value.name}
                node-name={item.value.name}
                label={item.value.label}
                items={item.value.children}
                item={item.value}
                tree-index={item.index}
                item-type={item.value.variableType}
                is-leaf={item.value.isLeaf}
            >
            </c-infinite-tree-item>
            <!-- all branches/items -->
        </template>
    </template>
    <!-- render leaf -->
    <template if:false={isRoot}>
        <!-- branch -->
        <template if:false={isLeaf}>
            <div class={computedItemClass}>
                <button
                    class="slds-button slds-button_full-width"
                    onclick={handleClick}
                >
                    <span class="slds-truncate infinite-tree-folder" title={label}>{label}</span>
                    <lightning-primitive-icon
                        if:true={showIcon}
                        icon-name="utility:chevronright"
                        size="x-small"
                    ></lightning-primitive-icon>
                </button>
            </div>
        </template>
        <!-- item -->
        <template if:true={isLeaf}>
            <div class={computedItemClass}>
                <button class="slds-button slds-button_full-width">
                    <span class="slds-truncate" title={label}>{label}</span>
                    </span><lightning-primitive-icon
                        if:true={showIcon}
                        icon-name={computedItemIconName}
                        size="x-small"
                    ></lightning-primitive-icon>
                    <span class="slds-assistive-text">{type}</span>
                </button>
            </div>
        </template>
    </template>
</template>
